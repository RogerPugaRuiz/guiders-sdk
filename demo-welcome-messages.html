<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo: Mensajes de Bienvenida Personalizables</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .content {
            padding: 30px;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .option-card {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #f8f9fa;
        }
        .option-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .option-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .option-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .option-description {
            font-size: 0.95em;
            line-height: 1.6;
            opacity: 0.8;
        }
        .custom-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        .custom-section h3 {
            margin: 0 0 15px 0;
            color: #667eea;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .checkbox-group input[type="checkbox"] {
            width: auto;
        }
        .test-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 10px 10px 0;
        }
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        .business-templates {
            background: #e8f4f8;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        .business-templates h3 {
            margin: 0 0 15px 0;
            color: #0066cc;
        }
        .business-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .business-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #0066cc;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .business-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .business-card h4 {
            margin: 0 0 8px 0;
            color: #0066cc;
        }
        .business-card p {
            margin: 0;
            font-size: 0.9em;
            color: #666;
        }
        .preview-area {
            background: #f1f3f4;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px dashed #ccc;
        }
        .preview-message {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
            font-style: italic;
        }
        .current-config {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Mensajes de Bienvenida Personalizables</h1>
            <p>Configura mensajes de bienvenida para diferentes estilos y tipos de negocio</p>
        </div>
        
        <div class="content">
            <h2>üé≠ Estilos Predefinidos</h2>
            <div class="options-grid">
                <div class="option-card" data-style="friendly">
                    <div class="option-title">üòä Amigable</div>
                    <div class="option-description">Tono c√°lido y acogedor, perfecto para crear conexi√≥n personal con el usuario</div>
                </div>
                <div class="option-card" data-style="professional">
                    <div class="option-title">üëî Profesional</div>
                    <div class="option-description">Formal y confiable, ideal para empresas corporativas y servicios B2B</div>
                </div>
                <div class="option-card" data-style="casual">
                    <div class="option-title">ü§ô Casual</div>
                    <div class="option-description">Relajado y moderno, perfecto para marcas j√≥venes y startups</div>
                </div>
                <div class="option-card" data-style="helpful">
                    <div class="option-title">üåü √ötil</div>
                    <div class="option-description">Enfocado en soluciones, ideal para soporte t√©cnico y atenci√≥n al cliente</div>
                </div>
            </div>

            <div class="business-templates">
                <h3>üè¢ Plantillas por Tipo de Negocio</h3>
                <div class="business-grid">
                    <div class="business-card" data-business="ecommerce">
                        <h4>üõçÔ∏è E-commerce</h4>
                        <p>Tiendas online, marketplace, retail</p>
                    </div>
                    <div class="business-card" data-business="saas">
                        <h4>üíª SaaS</h4>
                        <p>Software, aplicaciones, plataformas</p>
                    </div>
                    <div class="business-card" data-business="healthcare">
                        <h4>üè• Salud</h4>
                        <p>Cl√≠nicas, hospitales, telemedicina</p>
                    </div>
                    <div class="business-card" data-business="education">
                        <h4>üìö Educaci√≥n</h4>
                        <p>Cursos online, academias, universidades</p>
                    </div>
                    <div class="business-card" data-business="finance">
                        <h4>üí∞ Finanzas</h4>
                        <p>Bancos, fintech, seguros</p>
                    </div>
                </div>
            </div>

            <div class="custom-section">
                <h3>‚úèÔ∏è Personalizaci√≥n Avanzada</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <div class="form-group">
                            <label>Idioma:</label>
                            <select id="language">
                                <option value="es">Espa√±ol</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="includeEmojis" checked>
                            <label for="includeEmojis">Incluir emojis</label>
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="showTips" checked>
                            <label for="showTips">Mostrar consejos adicionales</label>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label>Mensaje personalizado:</label>
                            <textarea id="customMessage" placeholder="Escribe tu mensaje personalizado aqu√≠..."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div class="preview-area">
                <h3>üëÄ Vista Previa</h3>
                <div id="messagePreview">
                    <div class="preview-message">Selecciona un estilo para ver la vista previa...</div>
                </div>
                <div class="current-config">
                    <strong>Configuraci√≥n actual:</strong>
                    <pre id="currentConfig">{}</pre>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button class="test-btn" onclick="testInChat()">üî• Probar en Chat Real</button>
                <button class="test-btn" onclick="resetChat()">üîÑ Resetear Chat</button>
                <button class="test-btn" onclick="copyConfig()">üìã Copiar Configuraci√≥n</button>
            </div>
        </div>
    </div>

    <script src="dist/index.js"></script>
    <script>
        // Configuraci√≥n del SDK
        window.GUIDERS_CONFIG = {
            apiKey: 'demo-key',
            endpoint: 'https://api.guiders.ai/api',
            wsEndpoint: 'wss://api.guiders.ai/ws',
            welcomeMessage: {
                enabled: true,
                style: 'friendly',
                includeEmojis: true,
                language: 'es',
                showTips: true
            }
        };

        // Inicializar el SDK despu√©s de que se cargue
        window.addEventListener('load', () => {
            if (window.guiders) {
                console.log('üöÄ SDK inicializado para demo de mensajes de bienvenida');
            }
        });
    </script>
    <script>
        let currentConfig = {
            enabled: true,
            style: 'friendly',
            includeEmojis: true,
            language: 'es',
            showTips: true
        };

        const businessTemplates = {
            ecommerce: {
                es: "¬°Hola! üõçÔ∏è Bienvenido a nuestra tienda. Estoy aqu√≠ para ayudarte con tus compras, seguimiento de pedidos, devoluciones o cualquier pregunta sobre nuestros productos. ¬øEn qu√© puedo asistirte?",
                en: "Hello! üõçÔ∏è Welcome to our store. I'm here to help you with your purchases, order tracking, returns, or any questions about our products. How can I assist you?"
            },
            saas: {
                es: "¬°Hola! üíª Bienvenido al soporte t√©cnico. Estoy aqu√≠ para ayudarte con configuraci√≥n, resoluci√≥n de problemas, facturaci√≥n o cualquier duda sobre nuestro software. ¬°Cu√©ntame qu√© necesitas!",
                en: "Hello! üíª Welcome to technical support. I'm here to help you with setup, troubleshooting, billing, or any questions about our software. Tell me what you need!"
            },
            healthcare: {
                es: "¬°Hola! üè• Bienvenido a nuestro centro de atenci√≥n. Estoy aqu√≠ para ayudarte con citas, informaci√≥n sobre servicios, seguros m√©dicos o consultas generales. ¬øC√≥mo puedo ayudarte hoy?",
                en: "Hello! üè• Welcome to our care center. I'm here to help you with appointments, service information, medical insurance, or general inquiries. How can I help you today?"
            },
            education: {
                es: "¬°Hola! üìö Bienvenido a nuestro centro de aprendizaje. Estoy aqu√≠ para ayudarte con cursos, inscripciones, material de estudio o cualquier consulta acad√©mica. ¬øQu√© necesitas saber?",
                en: "Hello! üìö Welcome to our learning center. I'm here to help you with courses, enrollments, study materials, or any academic inquiries. What do you need to know?"
            },
            finance: {
                es: "¬°Hola! üí∞ Bienvenido a nuestros servicios financieros. Estoy aqu√≠ para ayudarte con consultas sobre cuentas, transacciones, inversiones o servicios bancarios. ¬øEn qu√© puedo asistirte?",
                en: "Hello! üí∞ Welcome to our financial services. I'm here to help you with account inquiries, transactions, investments, or banking services. How can I assist you?"
            }
        };

        // Event listeners para las tarjetas de estilo
        document.querySelectorAll('.option-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.option-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');
                
                const style = card.dataset.style;
                currentConfig.style = style;
                currentConfig.customMessage = undefined;
                document.getElementById('customMessage').value = '';
                
                updatePreview();
            });
        });

        // Event listeners para plantillas de negocio
        document.querySelectorAll('.business-card').forEach(card => {
            card.addEventListener('click', () => {
                const business = card.dataset.business;
                const template = businessTemplates[business];
                if (template) {
                    currentConfig.style = 'custom';
                    currentConfig.customMessage = template[currentConfig.language];
                    document.getElementById('customMessage').value = currentConfig.customMessage;
                    
                    document.querySelectorAll('.option-card').forEach(c => c.classList.remove('active'));
                    updatePreview();
                }
            });
        });

        // Event listeners para controles
        document.getElementById('language').addEventListener('change', (e) => {
            currentConfig.language = e.target.value;
            updatePreview();
        });

        document.getElementById('includeEmojis').addEventListener('change', (e) => {
            currentConfig.includeEmojis = e.target.checked;
            updatePreview();
        });

        document.getElementById('showTips').addEventListener('change', (e) => {
            currentConfig.showTips = e.target.checked;
            updatePreview();
        });

        document.getElementById('customMessage').addEventListener('input', (e) => {
            if (e.target.value.trim()) {
                currentConfig.style = 'custom';
                currentConfig.customMessage = e.target.value;
                document.querySelectorAll('.option-card').forEach(c => c.classList.remove('active'));
            } else {
                currentConfig.style = 'friendly';
                currentConfig.customMessage = undefined;
            }
            updatePreview();
        });

        function updatePreview() {
            // Simular el WelcomeMessageManager
            const preview = document.getElementById('messagePreview');
            const config = document.getElementById('currentConfig');
            
            let message = '';
            
            if (currentConfig.style === 'custom' && currentConfig.customMessage) {
                message = currentConfig.customMessage;
            } else {
                message = getPresetMessage(currentConfig.style, currentConfig.language);
            }

            preview.innerHTML = `<div class="preview-message">${message}</div>`;
            
            if (currentConfig.showTips) {
                const tips = getTips(currentConfig.language);
                tips.forEach(tip => {
                    preview.innerHTML += `<div class="preview-message" style="opacity: 0.8; font-size: 0.9em;">${tip}</div>`;
                });
            }
            
            config.textContent = JSON.stringify(currentConfig, null, 2);
        }

        function getPresetMessage(style, language) {
            const messages = {
                es: {
                    friendly: currentConfig.includeEmojis 
                        ? "¬°Hola! üëã Me alegra que est√©s aqu√≠. Soy tu asistente virtual y estoy listo para ayudarte con cualquier pregunta que tengas. ¬øEn qu√© puedo ayudarte hoy? üòä"
                        : "¬°Hola! Me alegra que est√©s aqu√≠. Soy tu asistente virtual y estoy listo para ayudarte con cualquier pregunta que tengas. ¬øEn qu√© puedo ayudarte hoy?",
                    
                    professional: currentConfig.includeEmojis
                        ? "Buenos d√≠as/tardes. üëî Bienvenido a nuestro servicio de atenci√≥n al cliente. Estoy aqu√≠ para proporcionarle asistencia especializada. Por favor, describa su consulta y un agente le atender√° a la brevedad."
                        : "Buenos d√≠as/tardes. Bienvenido a nuestro servicio de atenci√≥n al cliente. Estoy aqu√≠ para proporcionarle asistencia especializada. Por favor, describa su consulta y un agente le atender√° a la brevedad.",
                    
                    casual: currentConfig.includeEmojis
                        ? "¬°Hey! ü§ô ¬øQu√© tal? Soy tu chat de soporte. Si necesitas algo o tienes alguna duda, solo escr√≠beme. Estoy aqu√≠ para echarte una mano. ¬°Dale! üöÄ"
                        : "¬°Hey! ¬øQu√© tal? Soy tu chat de soporte. Si necesitas algo o tienes alguna duda, solo escr√≠beme. Estoy aqu√≠ para echarte una mano. ¬°Dale!",
                    
                    helpful: currentConfig.includeEmojis
                        ? "¬°Hola y bienvenido! üåü Estoy aqu√≠ para hacer tu experiencia lo m√°s f√°cil posible. Puedes preguntarme sobre nuestros productos, servicios, o cualquier duda que tengas. ¬°Empezamos! üí¨"
                        : "¬°Hola y bienvenido! Estoy aqu√≠ para hacer tu experiencia lo m√°s f√°cil posible. Puedes preguntarme sobre nuestros productos, servicios, o cualquier duda que tengas. ¬°Empezamos!"
                },
                en: {
                    friendly: currentConfig.includeEmojis
                        ? "Hello! üëã I'm so glad you're here. I'm your virtual assistant and I'm ready to help you with any questions you might have. How can I help you today? üòä"
                        : "Hello! I'm so glad you're here. I'm your virtual assistant and I'm ready to help you with any questions you might have. How can I help you today?",
                    
                    professional: currentConfig.includeEmojis
                        ? "Good day. üëî Welcome to our customer service platform. I'm here to provide you with specialized assistance. Please describe your inquiry and an agent will attend to you shortly."
                        : "Good day. Welcome to our customer service platform. I'm here to provide you with specialized assistance. Please describe your inquiry and an agent will attend to you shortly.",
                    
                    casual: currentConfig.includeEmojis
                        ? "Hey there! ü§ô What's up? I'm your support chat. If you need anything or have questions, just drop me a message. I'm here to help you out. Let's go! üöÄ"
                        : "Hey there! What's up? I'm your support chat. If you need anything or have questions, just drop me a message. I'm here to help you out. Let's go!",
                    
                    helpful: currentConfig.includeEmojis
                        ? "Hello and welcome! üåü I'm here to make your experience as smooth as possible. You can ask me about our products, services, or any questions you might have. Let's get started! üí¨"
                        : "Hello and welcome! I'm here to make your experience as smooth as possible. You can ask me about our products, services, or any questions you might have. Let's get started!"
                }
            };

            return messages[language]?.[style] || messages.es.friendly;
        }

        function getTips(language) {
            const tips = {
                es: [
                    "üí° Tip: S√© espec√≠fico en tu consulta para obtener una respuesta m√°s r√°pida",
                    "‚è±Ô∏è Tiempo promedio de respuesta: 2-5 minutos",
                    "üì± Este chat funciona desde cualquier dispositivo"
                ],
                en: [
                    "üí° Tip: Be specific in your query to get a faster response",
                    "‚è±Ô∏è Average response time: 2-5 minutes", 
                    "üì± This chat works from any device"
                ]
            };

            return tips[language] || tips.es;
        }

        function testInChat() {
            if (window.guiders) {
                try {
                    // Actualizar configuraci√≥n de mensaje de bienvenida
                    window.guiders.updateWelcomeMessage(currentConfig);
                    
                    // Mostrar el chat
                    window.guiders.showChat();
                    
                    console.log('üé® Mensaje de bienvenida actualizado:', currentConfig);
                    alert('¬°Configuraci√≥n aplicada! El chat se abrir√° con tu mensaje personalizado.');
                } catch (error) {
                    console.error('‚ùå Error al aplicar configuraci√≥n:', error);
                    alert('Error al aplicar la configuraci√≥n. Verifica la consola para m√°s detalles.');
                }
            } else {
                alert('Esperando que el SDK se cargue...');
                setTimeout(testInChat, 1000);
            }
        }

        function resetChat() {
            if (window.guiders) {
                try {
                    window.guiders.hideChat();
                    // Limpiar y reabrir despu√©s de un momento
                    setTimeout(() => {
                        window.guiders.showChat();
                    }, 500);
                } catch (error) {
                    console.error('‚ùå Error al resetear chat:', error);
                }
            }
        }

        function copyConfig() {
            const configText = JSON.stringify(currentConfig, null, 2);
            navigator.clipboard.writeText(configText).then(() => {
                alert('¬°Configuraci√≥n copiada al portapapeles!');
            });
        }

        // Inicializar con estilo friendly
        document.querySelector('[data-style="friendly"]').click();
    </script>
</body>
</html>