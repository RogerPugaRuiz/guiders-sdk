<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demo: Configuraci√≥n de Horarios Activos desde WordPress Plugin</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      color: #333;
      border-bottom: 3px solid #0073aa;
      padding-bottom: 10px;
    }
    .config-section {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #0073aa;
    }
    .config-title {
      font-weight: bold;
      color: #0073aa;
      margin-bottom: 10px;
    }
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .setting-card {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    .setting-label {
      font-weight: bold;
      color: #333;
      margin-bottom: 5px;
    }
    .setting-value {
      background: #f0f0f0;
      padding: 8px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
    }
    .code-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 15px 0;
    }
    .code-block pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    .example-section {
      margin: 30px 0;
      padding: 20px;
      border: 2px dashed #0073aa;
      border-radius: 8px;
    }
    .status-indicator {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 10px;
    }
    .status-active {
      background: #4CAF50;
      color: white;
    }
    .status-inactive {
      background: #f44336;
      color: white;
    }
    .btn {
      background: #0073aa;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    .btn:hover {
      background: #005a8a;
    }
    .test-results {
      margin-top: 20px;
      padding: 15px;
      background: #f0f8ff;
      border-radius: 8px;
      border: 1px solid #0073aa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üïê Demo: Configuraci√≥n de Horarios Activos desde WordPress Plugin</h1>
    <p>Esta p√°gina demuestra c√≥mo el plugin de WordPress de Guiders SDK permite configurar horarios de disponibilidad para el chat desde el panel de administraci√≥n.</p>

    <div class="config-section">
      <div class="config-title">üìã Configuraci√≥n Actual del Plugin</div>
      <p>Esta configuraci√≥n se genera autom√°ticamente desde el panel de WordPress (Ajustes > Guiders SDK):</p>
      
      <div class="settings-grid">
        <div class="setting-card">
          <div class="setting-label">Estado de Horarios Activos</div>
          <div class="setting-value" id="hours-enabled">Habilitado ‚úÖ</div>
        </div>
        <div class="setting-card">
          <div class="setting-label">Zona Horaria</div>
          <div class="setting-value" id="timezone">Europe/Madrid</div>
        </div>
        <div class="setting-card">
          <div class="setting-label">Rangos de Horarios</div>
          <div class="setting-value" id="ranges">08:00-14:00, 15:00-17:00</div>
        </div>
        <div class="setting-card">
          <div class="setting-label">Mensaje de Fallback</div>
          <div class="setting-value" id="fallback-message">üïê Nuestro chat est√° disponible de 8:00-14:00 y 15:00-17:00 (hora de Madrid).</div>
        </div>
      </div>
    </div>

    <h2>üîß Configuraci√≥n Generada por el Plugin</h2>
    <p>El plugin de WordPress genera autom√°ticamente esta configuraci√≥n JavaScript:</p>
    
    <div class="code-block">
      <pre id="generated-config">
// Configuraci√≥n generada autom√°ticamente por el plugin
window.GUIDERS_CONFIG = {
  apiKey: 'tu-api-key-desde-wordpress',
  environment: 'production', // o 'development'
  
  // Configuraci√≥n de horarios activos desde WordPress
  activeHours: {
    enabled: true,
    timezone: 'Europe/Madrid',
    ranges: [
      { start: '08:00', end: '14:00' },
      { start: '15:00', end: '17:00' }
    ],
    fallbackMessage: 'üïê Nuestro chat est√° disponible de 8:00-14:00 y 15:00-17:00 (hora de Madrid). ¬°Vuelve durante nuestros horarios de atenci√≥n!'
  },
  
  // Otras configuraciones del plugin
  chatEnabled: true,
  trackingEnabled: true,
  heuristicDetection: true
};
      </pre>
    </div>

    <h2>üìä Panel de Administraci√≥n de WordPress</h2>
    <div class="example-section">
      <h3>üéõÔ∏è Interfaz de Configuraci√≥n en WordPress</h3>
      <p><strong>Ubicaci√≥n:</strong> Panel de WordPress ‚Üí Ajustes ‚Üí Guiders SDK ‚Üí Secci√≥n "Horarios Activos"</p>
      
      <div style="background: white; padding: 20px; border: 1px solid #ccc; border-radius: 5px; margin: 15px 0;">
        <h4>Horarios Activos</h4>
        
        <label>
          <input type="checkbox" checked> Activar restricci√≥n por horarios
        </label>
        <p style="color: #666; font-size: 12px;">Si est√° desactivado, el chat estar√° disponible las 24 horas.</p>
        
        <div style="margin: 15px 0;">
          <label><strong>Zona Horaria:</strong></label><br>
          <select style="width: 100%; padding: 5px;">
            <option>-- Usar zona horaria local del navegador --</option>
            <option selected>Europe/Madrid (Espa√±a)</option>
            <option>America/New_York (EST/EDT)</option>
            <option>America/Mexico_City (M√©xico)</option>
            <option>UTC (Tiempo Universal Coordinado)</option>
          </select>
        </div>
        
        <div style="margin: 15px 0;">
          <label><strong>Rangos de Horarios:</strong></label>
          <div style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; margin: 5px 0;">
            <label>Desde:</label> <input type="time" value="08:00"> 
            <label>Hasta:</label> <input type="time" value="14:00">
            <button style="background: #dc3545; color: white; border: none; padding: 5px 10px;">Eliminar</button>
          </div>
          <div style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; margin: 5px 0;">
            <label>Desde:</label> <input type="time" value="15:00"> 
            <label>Hasta:</label> <input type="time" value="17:00">
            <button style="background: #dc3545; color: white; border: none; padding: 5px 10px;">Eliminar</button>
          </div>
          <button style="background: #28a745; color: white; border: none; padding: 5px 10px;">+ Agregar horario</button>
        </div>
        
        <div style="margin: 15px 0;">
          <label><strong>Mensaje cuando no est√° disponible:</strong></label><br>
          <textarea style="width: 100%; height: 60px; padding: 5px;">üïê Nuestro chat est√° disponible de 8:00-14:00 y 15:00-17:00 (hora de Madrid). ¬°Vuelve durante nuestros horarios de atenci√≥n!</textarea>
        </div>
      </div>
    </div>

    <h2>üß™ Pruebas en Tiempo Real</h2>
    <div class="test-results">
      <div><strong>Estado Actual del Chat:</strong> <span id="chat-status" class="status-indicator">Cargando...</span></div>
      <div><strong>Hora Actual:</strong> <span id="current-time">--:--</span></div>
      <div><strong>Zona Horaria Detectada:</strong> <span id="detected-timezone">Detectando...</span></div>
      <div><strong>Configuraci√≥n Activa:</strong> <span id="config-status">Verificando...</span></div>
    </div>

    <div style="margin: 20px 0;">
      <button class="btn" onclick="testActiveHours()">üîÑ Verificar Estado Actual</button>
      <button class="btn" onclick="showCurrentConfig()">üìã Mostrar Configuraci√≥n</button>
      <button class="btn" onclick="simulateTimeChange()">‚è∞ Simular Cambio de Hora</button>
    </div>

    <div id="test-output" style="margin-top: 20px;"></div>

    <h2>üìö Ejemplos de Configuraci√≥n</h2>
    
    <div class="example-section">
      <h3>Ejemplo 1: Horario de Oficina Est√°ndar</h3>
      <ul>
        <li><strong>Horarios:</strong> 9:00 - 17:00</li>
        <li><strong>Zona Horaria:</strong> Europe/Madrid</li>
        <li><strong>Mensaje:</strong> "Nuestro horario de atenci√≥n es de 9:00 a 17:00, hora de Madrid."</li>
      </ul>
    </div>

    <div class="example-section">
      <h3>Ejemplo 2: Horario Partido Espa√±ol</h3>
      <ul>
        <li><strong>Horarios:</strong> 8:00-14:00 y 15:00-17:00</li>
        <li><strong>Zona Horaria:</strong> Europe/Madrid</li>
        <li><strong>Mensaje:</strong> "üïê Estamos disponibles de 8:00-14:00 y 15:00-17:00 (hora de Madrid)."</li>
      </ul>
    </div>

    <div class="example-section">
      <h3>Ejemplo 3: Soporte Internacional</h3>
      <ul>
        <li><strong>Horarios:</strong> 9:00-18:00</li>
        <li><strong>Zona Horaria:</strong> (vac√≠o = autom√°tico)</li>
        <li><strong>Mensaje:</strong> "Estamos disponibles de 9:00 a 18:00 en tu zona horaria local."</li>
      </ul>
    </div>

    <h2>üîå Configuraci√≥n desde WordPress</h2>
    <p>Para configurar los horarios activos desde tu instalaci√≥n de WordPress:</p>
    <ol>
      <li>Instala y activa el plugin <strong>Guiders SDK</strong></li>
      <li>Ve a <strong>Ajustes ‚Üí Guiders SDK</strong> en tu panel de WordPress</li>
      <li>Introduce tu API Key de Guiders</li>
      <li>En la secci√≥n <strong>"Horarios Activos"</strong>:
        <ul>
          <li>Marca "Activar restricci√≥n por horarios"</li>
          <li>Selecciona tu zona horaria (o deja vac√≠o para autom√°tico)</li>
          <li>Configura los rangos de horarios usando los campos de tiempo</li>
          <li>Personaliza el mensaje que se muestra fuera del horario</li>
        </ul>
      </li>
      <li>Guarda los cambios</li>
      <li>El plugin generar√° autom√°ticamente la configuraci√≥n JavaScript necesaria</li>
    </ol>
  </div>

  <!-- Simulaci√≥n de configuraci√≥n desde WordPress -->
  <script>
    // Simulamos la configuraci√≥n que generar√≠a el plugin de WordPress
    window.GUIDERS_CONFIG = {
      apiKey: 'demo-api-key-from-wordpress',
      environment: 'development',
      endpoint: 'http://localhost:3000/api',
      webSocketEndpoint: 'ws://localhost:3000',
      
      // Configuraci√≥n de horarios activos generada por WordPress
      activeHours: {
        enabled: true,
        timezone: 'Europe/Madrid',
        ranges: [
          { start: '08:00', end: '14:00' },
          { start: '15:00', end: '17:00' }
        ],
        fallbackMessage: 'üïê Nuestro chat est√° disponible de 8:00-14:00 y 15:00-17:00 (hora de Madrid). ¬°Vuelve durante nuestros horarios de atenci√≥n!'
      },
      
      chatEnabled: true,
      trackingEnabled: true,
      heuristicDetection: true
    };

    // Funciones de prueba
    function updateStatus() {
      const now = new Date();
      document.getElementById('current-time').textContent = now.toLocaleTimeString();
      document.getElementById('detected-timezone').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
      
      // Simular verificaci√≥n de estado (en un caso real esto lo har√≠a el SDK)
      const config = window.GUIDERS_CONFIG.activeHours;
      const chatStatus = document.getElementById('chat-status');
      
      if (config.enabled) {
        // Simulaci√≥n simple de verificaci√≥n de horarios
        const currentHour = now.getHours();
        const isInRange = (currentHour >= 8 && currentHour < 14) || (currentHour >= 15 && currentHour < 17);
        
        if (isInRange) {
          chatStatus.textContent = 'Disponible';
          chatStatus.className = 'status-indicator status-active';
        } else {
          chatStatus.textContent = 'No Disponible';
          chatStatus.className = 'status-indicator status-inactive';
        }
      } else {
        chatStatus.textContent = 'Siempre Disponible';
        chatStatus.className = 'status-indicator status-active';
      }
      
      document.getElementById('config-status').textContent = `${config.ranges.length} rangos configurados`;
    }

    function testActiveHours() {
      const output = document.getElementById('test-output');
      const config = window.GUIDERS_CONFIG.activeHours;
      
      output.innerHTML = `
        <div class="test-results">
          <h4>üîç Resultado de la Verificaci√≥n</h4>
          <p><strong>Configuraci√≥n activa:</strong> ${config.enabled ? 'S√≠' : 'No'}</p>
          <p><strong>Zona horaria configurada:</strong> ${config.timezone || 'Autom√°tica (navegador)'}</p>
          <p><strong>Rangos configurados:</strong></p>
          <ul>
            ${config.ranges.map(range => `<li>${range.start} - ${range.end}</li>`).join('')}
          </ul>
          <p><strong>Mensaje de fallback:</strong> "${config.fallbackMessage}"</p>
        </div>
      `;
    }

    function showCurrentConfig() {
      const output = document.getElementById('test-output');
      const configStr = JSON.stringify(window.GUIDERS_CONFIG, null, 2);
      
      output.innerHTML = `
        <div class="test-results">
          <h4>üìã Configuraci√≥n Completa Generada por WordPress</h4>
          <div class="code-block">
            <pre>${configStr}</pre>
          </div>
        </div>
      `;
    }

    function simulateTimeChange() {
      const output = document.getElementById('test-output');
      const times = ['08:30', '12:00', '14:30', '16:00', '18:30', '22:00'];
      const results = times.map(time => {
        const [hour] = time.split(':').map(Number);
        const isInRange = (hour >= 8 && hour < 14) || (hour >= 15 && hour < 17);
        return `<li>${time}: ${isInRange ? '‚úÖ Chat Disponible' : '‚ùå Chat No Disponible'}</li>`;
      });
      
      output.innerHTML = `
        <div class="test-results">
          <h4>‚è∞ Simulaci√≥n de Diferentes Horas</h4>
          <p>Basado en la configuraci√≥n actual (8:00-14:00 y 15:00-17:00):</p>
          <ul>${results.join('')}</ul>
        </div>
      `;
    }

    // Actualizar estado cada segundo
    setInterval(updateStatus, 1000);
    updateStatus(); // Llamada inicial
  </script>
</body>
</html>
